{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","delete","concat","put","PersonsList","_ref","persons","filter","handleButton","react_default","a","createElement","person","name","toLowerCase","includes","map","key","number","onClick","Filter","_ref2","handleFilterChange","value","onChange","AddNewForm","_ref3","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Notification","_ref4","message","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","setMessage","useEffect","personService","App_Notification","App_Filter","event","target","App_AddNewForm","preventDefault","newPerson","some","window","confirm","oldId","find","setTimeout","catch","error","returnedPerson","App_PersonsList","ReactDOM","render","src_App","document","getElementById"],"mappings":"qNACMA,EAAU,eAmBDC,EAjBA,WACb,OAAOC,IAAMC,IAAIH,GAASI,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAgBvCL,EAbA,SAACM,GACd,OAAOL,IAAMM,KAAKR,EAASO,GAAWH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAYnDL,EATA,SAACQ,GACd,OAAOP,IAAMQ,OAAN,GAAAC,OAAgBX,EAAhB,KAAAW,OAA2BF,IAAML,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAQrDL,EALA,SAACQ,EAAIF,GAClB,OAAOL,IAAMU,IAAN,GAAAD,OAAaX,EAAb,KAAAW,OAAwBF,GAAMF,GAAWH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCbtEO,EAAc,SAAAC,GAAuC,IAApCC,EAAoCD,EAApCC,QAASC,EAA2BF,EAA3BE,OAAQC,EAAmBH,EAAnBG,aACtC,OACEC,EAAAC,EAAAC,cAAA,WAEIL,EACGC,OAAO,SAACK,GAAD,OAAYA,EAAOC,KAAKC,cAAcC,SAASR,EAAOO,iBAC7DE,IAAI,SAACJ,GAAD,OAAYH,EAAAC,EAAAC,cAAA,KAAGM,IAAKL,EAAOC,MAAOD,EAAOC,KAA7B,IAAoCD,EAAOM,OAA3C,IAAmDT,EAAAC,EAAAC,cAAA,UAAQQ,QAAS,kBAAMX,EAAaI,EAAOZ,MAA3C,UAAnD,SAMrBoB,EAAS,SAAAC,GAAoC,IAAjCd,EAAiCc,EAAjCd,OAAQe,EAAyBD,EAAzBC,mBACxB,OACEb,EAAAC,EAAAC,cAAA,qCACyBF,EAAAC,EAAAC,cAAA,SAAOY,MAAOhB,EAAQiB,SAAUF,MAKvDG,EAAa,SAAAC,GAA6E,IAA1EC,EAA0ED,EAA1EC,UAAWC,EAA+DF,EAA/DE,QAASC,EAAsDH,EAAtDG,iBAAkBC,EAAoCJ,EAApCI,UAAWC,EAAyBL,EAAzBK,mBACrE,OACEtB,EAAAC,EAAAC,cAAA,QAAMqB,SAAUL,GACdlB,EAAAC,EAAAC,cAAA,oBACQF,EAAAC,EAAAC,cAAA,SAAOY,MAAOK,EAASJ,SAAUK,IACvCpB,EAAAC,EAAAC,cAAA,WAFF,WAGUF,EAAAC,EAAAC,cAAA,SAAOY,MAAOO,EAAWN,SAAUO,KAE7CtB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQsB,KAAK,UAAb,UAMFC,EAAe,SAAAC,GAAiB,IAAdC,EAAcD,EAAdC,QACtB,OAAgB,OAAZA,EACK,KAGY,YAAjBA,EAAQH,KAERxB,EAAAC,EAAAC,cAAA,OAAK0B,UAAU,WACZD,EAAQA,SAIM,UAAjBA,EAAQH,KAERxB,EAAAC,EAAAC,cAAA,OAAK0B,UAAU,SACZD,EAAQA,cAHf,GA+GaE,EArGH,WAAM,IAAAC,EACeC,mBAAS,IADxBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACRjC,EADQmC,EAAA,GACCG,EADDH,EAAA,GAAAI,EAEgBL,mBAAS,IAFzBM,EAAAJ,OAAAC,EAAA,EAAAD,CAAAG,EAAA,GAERjB,EAFQkB,EAAA,GAECC,EAFDD,EAAA,GAAAE,EAGoBR,mBAAS,IAH7BS,EAAAP,OAAAC,EAAA,EAAAD,CAAAM,EAAA,GAGRlB,EAHQmB,EAAA,GAGGC,EAHHD,EAAA,GAAAE,EAIcX,mBAAS,IAJvBY,EAAAV,OAAAC,EAAA,EAAAD,CAAAS,EAAA,GAIR5C,EAJQ6C,EAAA,GAIAC,EAJAD,EAAA,GAAAE,EAKgBd,mBAAS,MALzBe,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAKRlB,EALQmB,EAAA,GAKCC,EALDD,EAAA,GAOhBE,oBAAU,WACRC,IAEG/D,KAAK,SAAAW,GAAO,OAAIsC,EAAWtC,MAC7B,IAqEH,OACEG,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAACgD,EAAD,CAAcvB,QAASA,IACvB3B,EAAAC,EAAAC,cAACiD,EAAD,CAAQrD,OAAQA,EAAQe,mBArBD,SAACuC,GAC1BR,EAAUQ,EAAMC,OAAOvC,UAsBrBd,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAACoD,EAAD,CACEpC,UA3EY,SAACkC,GACjBA,EAAMG,iBAEN,IAAMC,EAAY,CAChBpD,KAAMe,EACNV,OAAQY,GAGV,GAAIxB,EAAQ4D,KAAK,SAACtD,GAAD,OAAYA,EAAOC,OAASe,IAAU,CAErD,GADkBuC,OAAOC,QAAP,GAAAlE,OAAkB0B,EAAlB,4EACH,CACb,IAAMyC,EAAQ/D,EAAQgE,KAAK,SAAA1D,GAAM,OAAIA,EAAOC,OAASe,IAAS5B,GAC9D0D,EAAqBW,EAAOJ,GACzBtE,KAAK,SAAAC,GACJgD,EAAWtC,EAAQU,IAAI,SAAAJ,GAAM,OAAIA,EAAOZ,KAAOqE,EAAQzD,EAAShB,KAChE4D,EAAW,CAACpB,QAAO,GAAAlC,OAAKN,EAASiB,KAAd,YAA8BoB,KAAM,YACvDsC,WAAW,kBAAMf,EAAW,OAAO,OAEpCgB,MAAM,SAAAC,GACL7B,EAAWtC,EAAQC,OAAO,SAAAK,GAAM,OAAIA,EAAOZ,KAAOqE,KAClDb,EAAW,CAACpB,QAAO,GAAAlC,OAAK0B,EAAL,oCAAgDK,KAAM,UACzEsC,WAAW,kBAAMf,EAAW,OAAO,OAGzC,OAAO,EAGTE,EACUO,GACPtE,KAAK,SAAA+E,GACJ9B,EAAWtC,EAAQJ,OAAOwE,IAC1B3B,EAAW,IACXG,EAAa,IACbM,EAAW,CAACpB,QAAO,GAAAlC,OAAKwE,EAAe7D,KAApB,2BAAmDoB,KAAM,YAC5EsC,WAAW,kBAAMf,EAAW,OAAO,OAEpCgB,MAAM,SAAAC,GACLjB,EAAW,CAACpB,QAASqC,EAAM7E,SAASC,KAAK4E,MAAOxC,KAAM,UACtDsC,WAAW,kBAAMf,EAAW,OAAO,QAsCnC5B,QAASA,EACTC,iBAnCmB,SAACgC,GACxBd,EAAWc,EAAMC,OAAOvC,QAmCpBO,UAAWA,EACXC,mBAjCqB,SAAC8B,GAC1BX,EAAaW,EAAMC,OAAOvC,UAmCxBd,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAACgE,EAAD,CAAarE,QAASA,EAASC,OAAQA,EAAQC,aA7BxB,SAACR,GAC1B,IAAMY,EAASN,EAAQgE,KAAK,SAAA1D,GAAM,OAAIA,EAAOZ,KAAOA,IAClCmE,OAAOC,QAAP,UAAAlE,OAAyBU,EAAOC,QAEhD6C,EAAqB1D,GAClBL,KAAK,WACJiD,EAAWtC,EAAQC,OAAO,SAAAK,GAAM,OAAIA,EAAOZ,KAAOA,KAClDwD,EAAW,CAACpB,QAAO,GAAAlC,OAAKU,EAAOC,KAAZ,+BAA+CoB,KAAM,YACxEsC,WAAW,kBAAMf,EAAW,OAAO,kBClI7CoB,IAASC,OACPpE,EAAAC,EAAAC,cAACmE,EAAD,MACAC,SAASC,eAAe","file":"static/js/main.a88c7c4c.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl).then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject).then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\r\n}\r\n\r\n\r\nexport default { getAll, create, remove, update }","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\n\r\nconst PersonsList = ({ persons, filter, handleButton }) => {\r\n  return (\r\n    <div>\r\n      {\r\n        persons\r\n          .filter((person) => person.name.toLowerCase().includes(filter.toLowerCase()))\r\n          .map((person) => <p key={person.name}>{person.name} {person.number} <button onClick={() => handleButton(person.id)} >Delete</button> </p>)\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      Filter shown list with <input value={filter} onChange={handleFilterChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst AddNewForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        Name: <input value={newName} onChange={handleNameChange} />\r\n        <br />\r\n        Number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">Add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  if (message.type === 'message') {\r\n    return (\r\n      <div className=\"message\">\r\n        {message.message}\r\n      </div>\r\n    )\r\n  }\r\n  if (message.type === 'error'){\r\n    return (\r\n      <div className=\"error\">\r\n        {message.message}\r\n      </div>\r\n    )\r\n  }\r\n  \r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ message, setMessage ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(persons => setPersons(persons))\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    if (persons.some((person) => person.name === newName)) {\r\n      const confirmed = window.confirm(`${newName} is already added to the phonebook, update the old number with new one?`)\r\n      if (confirmed) {\r\n        const oldId = persons.find(person => person.name === newName).id\r\n        personService.update(oldId, newPerson)\r\n          .then(response => {\r\n            setPersons(persons.map(person => person.id !== oldId ? person : response))\r\n            setMessage({message: `${response.name} updated`, type: 'message'})\r\n            setTimeout(() => setMessage(null), 3000)\r\n          })\r\n          .catch(error => {\r\n            setPersons(persons.filter(person => person.id !== oldId))\r\n            setMessage({message: `${newName} was already deleted from server`, type: 'error'})\r\n            setTimeout(() => setMessage(null), 3000)\r\n          })\r\n      }\r\n      return false\r\n    }\r\n    \r\n    personService\r\n      .create(newPerson)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setMessage({message: `${returnedPerson.name} added to the phonebook`, type: 'message'})\r\n        setTimeout(() => setMessage(null), 3000)\r\n      })\r\n      .catch(error => {\r\n        setMessage({message: error.response.data.error, type: 'error'})\r\n        setTimeout(() => setMessage(null), 3000)\r\n      })\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n\r\n  const handleDeleteButton = (id) => {\r\n    const person = persons.find(person => person.id === id)\r\n    const confirmed = window.confirm(`Delete ${person.name}`)\r\n    if(confirmed) {\r\n      personService.remove(id)\r\n        .then(() => {\r\n          setPersons(persons.filter(person => person.id !== id))\r\n          setMessage({message: `${person.name} deleted from the phonebook`, type: 'message'})\r\n          setTimeout(() => setMessage(null), 3000)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\r\n\r\n      <h2>Add new</h2>\r\n      <AddNewForm \r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n      <PersonsList persons={persons} filter={filter} handleButton={handleDeleteButton}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}